# 动手学计算机组成原理

## 第一章  冯·诺依曼体系结构

### 1.1  计算机的组成

硬件系统和软件系统共同构成了一个完整的计算机系统。硬件是计算机的物理部件。软件则是指令和数据的集合，它指导硬件执行特定的任务，包括操作系统、应用程序和各种系统服务程序等。操作系统作为软件和硬件之间的桥梁，管理和控制计算机硬件资源，同时为应用软件提供运行环境。计算机的组成涵盖了执行任务所需的物理设备及其相互之间的交互方式(操作系统)，以及使这些设备能够按照既定目标工作的系统软件。

#### 1.1.1  计算机硬件的基本组成

计算机硬件技术经历了电子管→晶体管→集成电路→超大规模集成电路等发展阶段，但目前为止，绝大部分通用计算机的基本组成仍然具有冯·诺依曼结构计算机的特征。其基本思想主要如下：

1. 采用“存储程序”的工作方式
   存储程序的基本思想是：必须将事先编好的程序和原始数据送入主存后才能执行程序，一旦程序被启动执行，计算机能在不需操作人员干预下自动完成逐条取出指令并执行任务.

2. 计算机由运算器、控制器、存储器、输入设备和输出设备5个基本部件组成.

3. 指令和数据以同等地位存储在存储器中，形式上没有区别。但计算机能区分二者，指令由操作码和地址码组成，操作码指出操作的类型，地址码指出操作数的地址。

##### 1.  计算机的功能部件

1. 控制器和运算器：控制器计算机的指挥中心。控制器通过地址访问存储器，从存储器中取出指令，经译码器分析后，根据指令分析结果产生相应的操作控制信号作用于其他部件。运算器则是实现算术运算和逻辑运算的部件。 
   
   > 大家所了解的cpu是由**控制器+运算器**集成在一个芯片上而来的 。cpu、主存以及其他I/O设备都是由一条总线连接起来并通过总线与其他设备通信。
   > 
   > ***
   > 
   > 现代计算机的结构更复杂，包括**多重总线**这将会在后续章节介绍

2. 存储器：是计算机用来存放所有数据和程序的记忆部件。它的基本功能是按指定的地址存入或者取出信息。 计算机中的存储器可分成两大类：
   
   - 一类是内存储器，内存存储器包括主存储器（主存）和高速存储器（cache），因早期计算机没有cache，所以一般情况下并不区分内存和主存，二者都特指主存储器；
   
   - 另一类是外存储器（辅助存储器），简称外存或辅存主要是磁盘存储器和固态硬盘等直接和主存交换信息的存储器。 存储器由若干个存储单元组成，每个存储单元都有一个地址，计算机通过地址对存储单元进行读写。一个存储器所包含的字节数称为存储容量，单位有B、KB、MB、GB、TB等。

3. 外部设备和设备控制器：外部设备简称外设，也成为I/O设备，其中I/O是输入/输出的缩写。外设通常由机械部分和电子部分组成，机械部分是外部设备本身，而电子设备则是控制外部设备的设备控制器
   
   - 输入设备：是向计算机中输入信息（程序、数据、声音、文字、图形、图像等）的设备。常见的输入设备有：键盘、鼠标、图形扫描仪、触摸屏、条形码输入器、光笔等。 外存储器也是一种输入设备。
   - 输出设备：主要有显示器、打印机和绘图仪等。外存储器也当作一种输出设备。
   
   外设通过设备控制器连接到主机上，各种设备控制器统称为I/O控制器、I/O接口或I/O模块。如键盘接口、打印机适配器、显卡、网卡等都是设备控制器。

这里借用[计算机基础系列一：计算机硬件 - linhaifeng - 博客园](https://www.cnblogs.com/linhaifeng/p/6523843.html)大佬的理解帮大家梳理一下各个硬件的作用

- cpu是大脑，负责控制全身和运算
- 内存是人的记忆，负责临时存储
- 外存是记事本，负责永久存储
- 输入设备是耳朵、眼睛或嘴巴，负责接收外部的信息存入内存
- 输出设备是脸部表情或者屁股，负责输出处理后的结果
- 以上所有设备都通过总线连接，总线相当于人的神经

<center>（图片）</center>

#### 1.1.2  计算机的软件

冯·诺伊曼结构计算机“存储程序”工作方式的一个重要特征是**计算机的操作由存储并运行在内部的程序进行控制**。一般将软件分成应用软件和系统软件两大类。

专门为数据处理、科学计算、事务管理、多媒体处理、工程设计以及过程控制等应用所编写的各类程序都成为应用软件。例如，人们平时经常使用的电子邮件收发软件、视频播放软件、游戏软件、文字处理软件、电子表格软件、演示文稿制作软件等都是应用软件。

系统软件包括为有效、安全地使用和管理计算机以及为开发和运行应用软件而提供的各种软件，介于计算机硬件与应用软件之间，它与具体应用关系不大。系统软件包括操作系统(如Windows)、语言处理系统(如C语言编译器)、数据库管理系统(如Oracle)和各类实用程序(如磁盘碎片整理程序、备份程序)等。操作系统请看[动手学操作系统]。

#### 1.1.3 计算机系统的层次结构

### 1.2 计算机的性能指标评估

上面说到一个完整的计算机系统是由硬件和软件构成，而硬件性能又影响着整个计算机系统的性能。硬件的性能不能拆开每个硬件来看，只能通过运行软件才能反映出来，而相同硬件上运行不同软件或者相同软件的不同测试集所测得的性能又可能不一样。同时合理的算法和代码的实现可以更有效地利用硬件资源，因此拥有一套综合的测试和评价硬件性能的方法是非常有必要的。

常用的系统性能测试指标包括：机器字长、主存容量、响应时间、吞吐量；计算机的性能主要考虑的是cpu的性能，其中cpu的性能常常用到几个重要的概念和参数：时钟周期、时钟频率、CPI、MIPS、MFLOPS。

基本性能指标：

1. 机器字长：cpu一次能处理的二进制位数，其大小与cpu内部的ALU的位数以及通用寄存器的宽度相等。通常情况下，字长越长数所能表示的范围就越大，精度越高，计算速度也越快。通常所说的32位或64位机器中，32和64就是机器字长
   
   > 指令字长：一个指令字中包含的二进制代码长度
   > 
   > 存储字长：一个存储单元存储的二进制代码长度
   > 
   > --- 
   > 
   > 字与字长并不是一个概念，字用来表示被处理信息的单位，如x86机器中将一个字定义为16位

2. 主存容量：主存能存储的最大信息容量，通常用字节来衡量。m个能存储n个二进制位的存储单元其主存容量为：
   
   $$
   主存容量=N×M（位或b）
   $$
   
   > 主存的核心包含MAR与MDR，其中MAR是地址寄存器，用于存储要访问的内存地址。MDR是数据寄存器，用于存储从主存中读取的数据或者要写入主存的数据。
   > 
   > ------
   > 
   > 一个主存其MAR为16位，表示该存储体中有$2^{16}=65536$个存储单元，64K内存（1K=1024），MDR为32位，其主存容量为64K×32位。也可表示为64K×4G(b)

3. 吞吐量：计算机系统在单位时间内能够处理的信息量。
   
   - cpu处理能力越强吞吐量越大
   
   - 外存访问速度越快吞吐量越大
   
   - 主存访问速度越快吐吞量越大

4. 响应时间：计算机完成一个请求所需要的时间。通常包括cpu时间和其他等待时间（访问内存、外存以及其他外部设备所需要的时间）。

与速度相关的性能指标

1.     CPU时钟频率和CPU时钟周期：CPU时钟信号是一种基本定时信号，是固定频率的脉冲信号，用于驱动计算机内部各组件协调工作。
   
   - 时钟频率（主频）：cpu内部时钟的频率，通常以Hz（赫兹）为单位，5Hz表示频率为每秒5次。
   
   - 时钟周期：时钟频率的倒数。T=1/f
     
     ![](C:\Users\zhengfw\AppData\Roaming\marktext\images\2024-09-02-17-06-43-bfc0b24f1daa43ee7c6891b0d788548.png)
   
   > 

2. CPI：执行一条指令所需要的时钟周期数量。
   
   $$
   CPI=程序执行所需的时钟周期数量÷程序所包含的指令数量
   $$
   
   > 若给出的程序包含多条指令，则CPI就是这些指令的数学期望。
   > 
   > 一个程序中A类型指令占比50%其CPI为4，B类型指令占比30%CPI为10，C类型指令占比20%CPI为5。则该程序的CPI为$4×0.5+10×0.3+5×0.2=6$

3. CPU执行时间：真正用于用户程序的执行时间，并不包括为执行用户程序而花费在操作系统、主存（内存）、外存、外部设备上的时间
   
   > Intel Core i5-8400 @ 2.80GHz

$$
CPU执行时间=程序执行所需的时钟周期数量×时钟周期
$$

4. MIPS：每秒执行多少百万条指令。

$$
MIPS=(程序所包含的指令数量÷CPU执行时间)÷10^6
$$

MIPS=(时钟频率÷CPI)÷

5. MFLOPS：每秒执行多少百万次浮点运算
   
   - M(Million)是大小同样的还有GFLOPS、TFLOPS等。M、G、T、P、E、Z大小依次增加$10^3$

<mark style="background-color:BlanchedAlmond">这里给大家布置一个小作业，完本章学习后大家查看一下自己的电脑配置是什么样的，同时根据黑神话·悟空所给的cpu配置要求**最低cpu配置**Intel Core i5-8400 / AMD Ryzen 5 1600**推荐cpu配置**Intel Core i7-9700 / AMD Ryzen 5 5500。分别查询最低cpu配置和推荐cpu配置里同品牌两款cpu芯片的区别以及intel和amd的区别</mark>

### 参考

王道408计算机组成原理

袁春风.计算机组成与系统结构

[计算机基础系列一：计算机硬件 - linhaifeng - 博客园](https://www.cnblogs.com/linhaifeng/p/6523843.html)
